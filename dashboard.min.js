/*
	Dashboard version 0.7.0 alpha
	(c) 2016 Epistemex
	www.epistemex.com
	MIT License
*/
function Dashboard(C){C=C||{};var B=this,E=C.idPrefix?C.idPrefix+"_":"",d=0,G=C.tabIndexStart||1,b=C.callback,v=document,j=v.createElement.bind(v),w=v.getElementById.bind(v),u=h(),D=C.parent?(typeof C.parent==="string"?w(C.parent):C.parent):v.body,x="pointer-events: none !important",H;u.className=C.css||"dashboard";if(C.id){u.id=C.id}a(D,u);function a(K){for(var J=1,I=arguments;J<I.length;J++){K.appendChild(I[J])}}function F(K,I,J){if(I.cb){K.__cb=I.cb.bind(J)}}function z(I){return typeof I==="boolean"}function A(I){return typeof I==="string"}function q(I,N,M,S,Q,L,R){var K=p(I),J=o(I),O=n(I,"range"),P=r(I.id+"v",R?R(S):S);O.min=N;O.max=M;O.step=Q;O.value=Math.max(N,Math.min(M,S));O.tabIndex=G++;O.disabled=I.dis;O.__v=P;O.__type="slider";O.__tr=R;O.__bind=I.bind;F(O,I,K);if(L){O.oninput=c}else{O.onchange=c;O.oninput=y}a(K,J,O,P);return K}function f(I,K){var M=p(I),L=o(I),J=n(I,"checkbox");J.checked=K;J.tabIndex=G++;J.disabled=I.dis;J.onchange=c;J.__type="checkbox";J.__bind=I.bind;F(J,I,M);a(M,L,J);return M}function t(I,M,L){var K=p(I),J=o(I),N=n(I,"textbox");N.value=M;N.tabIndex=G++;N.disabled=I.dis;N.onchange=c;N.__type="textbox";N.__bind=I.bind;F(N,I,K);if(I.cb){N.__cb=I.cb.bind(K)}if(L){N.onkeyup=c}a(K,J,N);return K}function m(I,M){var L=p(I),K=o(I),J=j("i");J.id=I.id;J.innerHTML=M;J.disabled=I.dis;J.__type="info";J.__bind=I.bind;a(L,K,J);return L}function s(I,L,J){var M=p(I),K;if(J){M.innerHTML=L||""}else{K=j("p");K.innerHTML=L||"";K.id=I.id;a(M,K)}return M}function g(I,K){var M=p(I),L=o(I),J=n(I,"color");L.style.cssText=x;J.value=K;J.tabIndex=G++;J.disabled=I.dis;J.onchange=c;J.__type="color";J.__bind=I.bind;F(J,I,M);a(M,L,J);return M}function i(I,L){var K=p(I),J=o(I),M=j("select");M.id=I.id;M.tabIndex=G++;M.disabled=I.dis;M.onchange=c;M.__type="dropdown";M.__bind=I.bind;F(M,I,K);L.forEach(function(N){var O=j("option");O.innerHTML=N;a(M,O)});a(K,J,M);return K}function e(I,K){var M=p(I),L=o(I),J=j("button");L.style.cssText=x;J.id=I.id;J.innerHTML=K;J.tabIndex=G++;J.disabled=I.dis;J.onclick=c;J.__type="button";J.__bind=I.bind;F(J,I,M);a(M,L,J);return M}function l(I,L){var K=p(I),J=new Image;J.id=I.id;J.src=L;J.tabIndex=G++;J.disabled=I.dis;J.onclick=c;J.__type="image";J.__bind=I.bind;F(J,I,K);a(K,J);return K}function k(I,N,K){var M=p(I),L=h(),J=c.bind(L);M.className=K?"hidden":I.css||"group";M.disabled=I.dis;L.id=I.id;L.innerHTML=I.lbl;L.tabIndex=G++;L.onclick=function(){if(this.disabled){return}M.className=this.__state?I.css||"group":"hidden";this.__state=!this.__state;J()};L.__type="group";L.__bind=I.bind;L.__state=K;F(L,I,M);a(M,L);N.forEach(function(O){B.add(O,M)});return M}function h(){return j("div")}function p(I){var J=h();J.className=I.css||"line";if(!I.show){J.style.display="none"}return J}function r(I,K){var J=j("span");J.id=I;J.innerHTML=K;return J}function n(I,K){var J=j("input");J.id=I.id;J.type=K;return J}function o(I){var J=j("label");J.setAttribute("for",I.id);J.innerHTML=I.lbl;return J}function c(){if(this.__v){this.__v.innerHTML=this.__tr?this.__tr(this.value):this.value}if(this.__cb){var I=B.value(this);if(this.__old!==I||this.__type==="button"){clearTimeout(H);H=setTimeout(this.__cb({id:this.id.substr(E.length),target:this,type:this.__type,value:I,timestamp:Date.now()}),7);this.__old=I}}}function y(){this.__v.innerHTML=this.__tr?this.__tr(this.value):this.value}this.add=function(M,N){var I,K,J,L;if(Array.isArray(M)){L=this;M.forEach(function(O){L.add(O,N)})}else{d++;I={id:E+(M.id||M.type+d),dis:!(z(M.enabled)?M.enabled:!0),css:M.css,show:z(M.show)?M.show:!0,lbl:M.label||(M.type+d),cb:M.callback||b,bind:M.bind||null};switch(M.type){case"group":J=k(I,M.items||[],M.collapsed);break;case"slider":if(Array.isArray(K=M.list)){J=q(I,0,K.length-1,0,1,M.live,function(O){return K[O]})}else{J=q(I,M.min||0,typeof M.max!=="undefined"?M.max:100,typeof M.value!=="undefined"?M.value:50,M.step||1,M.live,M.formatter)}break;case"checkbox":J=f(I,!!M.checked);break;case"textbox":J=t(I,M.text||"",M.live);break;case"color":J=g(I,M.color||"red");break;case"dropdown":J=i(I,M.list);break;case"button":J=e(I,M.text||M.type+d);break;case"separator":J=j("hr");break;case"info":J=m(I,M.text||"");break;case"text":J=s(I,M.text||"",M.raw);break;case"image":J=l(I,M.url);break;default:throw"Unknown type"}a(N||u,J)}return this};this.rem=function(I){var J=A(I)?w(E+I):I,K;if(!J||!J.__type){throw"Unknown control"}K=J.parentNode;K.parentNode.removeChild(K);return this};this.value=function(J,N){var L=A(J)?w(E+J):J;if(L&&L.__type){if(arguments.length===2){switch(L.__type){case"slider":L.value=L.__v.innerHTML=N;break;case"checkbox":L.checked=N;break;case"image":L.src=N;break;case"group":L.__state=N;L.dispatchEvent(new MouseEvent("click"));break;case"color":case"textbox":L.value=N;break;case"info":case"button":L.innerHTML=N;break;case"dropdown":if(typeof N==="number"){if(N>=0&&N<L.options.length){L.selectedIndex=N}}else{if(typeof N==="string"){for(var I=0,M=L.options,K=M.length;I<K;I++){if(M[I].innerHTML===N){L.selectedIndex=I;break}}}}break}return this}else{switch(L.__type){case"slider":return +L.value;case"checkbox":return !!L.checked;case"image":return L.src;case"group":return !L.__state;case"color":case"textbox":return L.value;case"info":case"button":return L.innerHTML;case"dropdown":return L.selectedIndex}}}};this.enable=function(I,K){var J=A(I)?w(E+I):I;if(J&&J.__type){if(!K||J.__type==="group"){this.value(I,!1)}J.disabled=!K}return this};this.show=function(I,K){if(arguments.length===1){u.style.display=I?null:"none"}else{var J=A(I)?w(E+I):I;if(J&&J.__type){J.parentNode.style.display=K?null:"none"}}return this};this.bindTo=function(L){if(A(L)){L=JSON.parse(L)}var J=u.querySelectorAll("*"),I,K=0;while(I=J[K++]){if(I.__bind&&typeof L[I.__bind]!=="undefined"){this.value(I,L[I.__bind])}}};this.getBound=function(){var L={},I,K=0,J=u.querySelectorAll("*");while(I=J[K++]){if(A(I.__bind)){L[I.__bind]=this.value(I)}}return L}};