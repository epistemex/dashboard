/*
	Dashboard version 0.4.0 alpha
	(c) 2016 Epistemex
	www.epistemex.com
	MIT License
*/
function Dashboard(x){x=x||{};var w=this,y=x.idPrefix?x.idPrefix+"_":"",d=0,A=x.tabIndexStart||1,u=!1,b=x.callback,q=document,i=q.createElement.bind(q),r=q.getElementById.bind(q),p=g(),B;p.className=x.css||"dashboard";if(x.id){p.id=x.id}function a(E){for(var D=1,C=arguments;D<C.length;D++){E.appendChild(C[D])}}function z(E,C,D){if(C.cb){E.__cb=C.cb.bind(D)}}function t(C){return typeof C==="boolean"}function v(C){return typeof C==="string"}function m(C,H,G,M,K,F,L){var E=l(C),D=k(C),I=j(C,"range"),J=n(C.id+"v",L?L(M):M);I.min=H;I.max=G;I.value=Math.max(H,Math.min(G,M));I.step=K;I.tabIndex=A++;I.disabled=C.dis;I.__v=J;I.__type="slider";I.__tr=L;z(I,C,E);if(F){I.oninput=c}else{I.onchange=c;I.oninput=s}a(E,D,I,J);a(p,E)}function f(C,E){var G=l(C),F=k(C),D=j(C,"checkbox");D.checked=E;D.tabIndex=A++;D.disabled=C.dis;D.onchange=c;D.__type="checkbox";z(D,C,G);a(G,F,D);a(p,G)}function o(C,G,F){var E=l(C),D=k(C),H=j(C,"textbox");H.value=G;H.tabIndex=A++;H.disabled=C.dis;H.onchange=c;H.__type="textbox";z(H,C,E);if(C.cb){H.__cb=C.cb.bind(E)}if(F){H.onkeyup=c}a(E,D,H);a(p,E)}function h(C,F){var E=l(C),D=k(C),G=i("select");G.id=C.id;G.tabIndex=A++;G.disabled=C.dis;G.onchange=c;G.__type="dropdown";z(G,C,E);F.forEach(function(H){var I=i("option");I.innerHTML=H;a(G,I)});a(E,D,G);a(p,E)}function e(C,E){var G=l(C),F=k(C),D=i("button");D.id=C.id;D.innerHTML=E;D.tabIndex=A++;D.disabled=C.dis;D.onclick=c;D.__type="button";z(D,C,G);a(G,F,D);a(p,G)}function g(){return i("div")}function l(C){var D=g();D.className=C.css||"line";D.style.display=C.show?"block":"none";return D}function n(C,E){var D=i("span");D.id=C;D.innerHTML=E;return D}function j(C,E){var D=i("input");D.id=C.id;D.type=E;return D}function k(C){var D=i("label");D.setAttribute("for",C.id);D.innerHTML=C.lbl;return D}function c(){if(this.__v){this.__v.innerHTML=this.__tr?this.__tr(this.value):this.value}if(this.__cb){var C=w.value(this);if(this.__old!==C||this.__type==="button"){clearTimeout(B);B=setTimeout(this.__cb({id:this.id.substr(y.length),target:this,type:this.__type,value:C,timestamp:Date.now()}),7);this.__old=C}}}function s(){this.__v.innerHTML=this.__tr?this.__tr(this.value):this.value}this.add=function(E){d++;var C={id:y+(E.id||E.type+d),dis:!(t(E.enabled)?E.enabled:!0),css:E.css,show:t(E.show)?E.show:!0,lbl:E.label||(E.type+d),cb:E.callback||b},D,G,F;switch(E.type){case"slider":if(Array.isArray(D=E.list)){m(C,0,D.length-1,0,1,E.live,function(H){return D[H]})}else{m(C,E.min||0,typeof E.max!=="undefined"?E.max:100,typeof E.value!=="undefined"?E.value:50,E.step||1,E.live,E.transformer)}break;case"checkbox":f(C,!!E.checked);break;case"textbox":o(C,E.text||"",E.live);break;case"dropdown":h(C,E.list);break;case"button":e(C,E.text||E.type+d);break;case"hr":a(p,i("hr"));break;case"text":G=l(C);if(E.raw){G.innerHTML=E.text||""}else{F=i("p");F.innerHTML=E.text||"";if(E.id){F.id=C.id}a(G,F)}a(p,G);break;default:throw"Unknown type"}return this};this.rem=function(C){var D=v(C)?r(y+C):C,E;if(!D||!D.__type){throw"Unknown control"}E=D.parentNode;E.parentNode.removeChild(E);return this};this.value=function(D,H){var F=v(D)?r(y+D):D;if(F&&F.__type){if(arguments.length===2){switch(F.__type){case"slider":F.value=F.__v.innerHTML=H;break;case"checkbox":F.checked=H;break;case"textbox":F.value=H;break;case"button":F.innerHTML=H;break;case"dropdown":if(typeof H==="number"){if(H>=0&&H<F.options.length){F.selectedIndex=H}}else{if(typeof H==="string"){for(var C=0,G=F.options,E=G.length;C<E;C++){if(G[C].innerHTML===H){F.selectedIndex=C;break}}}}break}return this}else{switch(F.__type){case"slider":return +F.value;case"checkbox":return !!F.checked;case"textbox":return F.value;case"button":return F.innerHTML;case"dropdown":return F.value}}}};this.enable=function(C,E){var D=v(C)?r(y+C):C;if(D&&D.__type){D.disabled=!E}return this};this.show=function(C,E){var D=v(C)?r(y+C):C;if(D&&D.__type){D.parentNode.style.display=E?"block":"none"}return this};this.init=function(C){if(!u){(C||q.body).appendChild(p);u=!0}return this}};