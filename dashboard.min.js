/*
	Dashboard version 0.5.0 alpha
	(c) 2016 Epistemex
	www.epistemex.com
	MIT License
*/
function Dashboard(z){z=z||{};var y=this,A=z.idPrefix?z.idPrefix+"_":"",d=0,C=z.tabIndexStart||1,w=!1,b=z.callback,s=document,j=s.createElement.bind(s),t=s.getElementById.bind(s),r=h(),D;r.className=z.css||"dashboard";if(z.id){r.id=z.id}function a(G){for(var F=1,E=arguments;F<E.length;F++){G.appendChild(E[F])}}function B(G,E,F){if(E.cb){G.__cb=E.cb.bind(F)}}function v(E){return typeof E==="boolean"}function x(E){return typeof E==="string"}function o(E,J,I,O,M,H,N){var G=n(E),F=m(E),K=l(E,"range"),L=p(E.id+"v",N?N(O):O);K.min=J;K.max=I;K.step=M;K.value=Math.max(J,Math.min(I,O));K.tabIndex=C++;K.disabled=E.dis;K.__v=L;K.__type="slider";K.__tr=N;K.__bind=E.bind;B(K,E,G);if(H){K.oninput=c}else{K.onchange=c;K.oninput=u}a(G,F,K,L);a(r,G)}function f(E,G){var I=n(E),H=m(E),F=l(E,"checkbox");F.checked=G;F.tabIndex=C++;F.disabled=E.dis;F.onchange=c;F.__type="checkbox";F.__bind=E.bind;B(F,E,I);a(I,H,F);a(r,I)}function q(E,I,H){var G=n(E),F=m(E),J=l(E,"textbox");J.value=I;J.tabIndex=C++;J.disabled=E.dis;J.onchange=c;J.__type="textbox";J.__bind=E.bind;B(J,E,G);if(E.cb){J.__cb=E.cb.bind(G)}if(H){J.onkeyup=c}a(G,F,J);a(r,G)}function k(E,I){var H=n(E),G=m(E),F=j("i");F.id=E.id;F.innerHTML=I;F.disabled=E.dis;F.__type="info";F.__bind=E.bind;a(H,G,F);a(r,H)}function g(E,G){var I=n(E),H=m(E),F=l(E,"color");F.value=G;F.tabIndex=C++;F.disabled=E.dis;F.onchange=c;F.__type="color";F.__bind=E.bind;B(F,E,I);a(I,H,F);a(r,I)}function i(E,H){var G=n(E),F=m(E),I=j("select");I.id=E.id;I.tabIndex=C++;I.disabled=E.dis;I.onchange=c;I.__type="dropdown";I.__bind=E.bind;B(I,E,G);H.forEach(function(J){var K=j("option");K.innerHTML=J;a(I,K)});a(G,F,I);a(r,G)}function e(E,G){var I=n(E),H=m(E),F=j("button");F.id=E.id;F.innerHTML=G;F.tabIndex=C++;F.disabled=E.dis;F.onclick=c;F.__type="button";F.__bind=E.bind;B(F,E,I);a(I,H,F);a(r,I)}function h(){return j("div")}function n(E){var F=h();F.className=E.css||"line";if(!E.show){F.style.display="none"}return F}function p(E,G){var F=j("span");F.id=E;F.innerHTML=G;return F}function l(E,G){var F=j("input");F.id=E.id;F.type=G;return F}function m(E){var F=j("label");F.setAttribute("for",E.id);F.innerHTML=E.lbl;return F}function c(){if(this.__v){this.__v.innerHTML=this.__tr?this.__tr(this.value):this.value}if(this.__cb){var E=y.value(this);if(this.__old!==E||this.__type==="button"){clearTimeout(D);D=setTimeout(this.__cb({id:this.id.substr(A.length),target:this,type:this.__type,value:E,timestamp:Date.now()}),7);this.__old=E}}}function u(){this.__v.innerHTML=this.__tr?this.__tr(this.value):this.value}this.add=function(G){d++;var E={id:A+(G.id||G.type+d),dis:!(v(G.enabled)?G.enabled:!0),css:G.css,show:v(G.show)?G.show:!0,lbl:G.label||(G.type+d),cb:G.callback||b,bind:G.bind||null},F,I,H;switch(G.type){case"slider":if(Array.isArray(F=G.list)){o(E,0,F.length-1,0,1,G.live,function(J){return F[J]})}else{o(E,G.min||0,typeof G.max!=="undefined"?G.max:100,typeof G.value!=="undefined"?G.value:50,G.step||1,G.live,G.transformer)}break;case"checkbox":f(E,!!G.checked);break;case"textbox":q(E,G.text||"",G.live);break;case"color":g(E,G.color||"red");break;case"dropdown":i(E,G.list);break;case"button":e(E,G.text||G.type+d);break;case"hr":a(r,j("hr"));break;case"info":k(E,G.text||"");break;case"text":I=n(E);if(G.raw){I.innerHTML=G.text||""}else{H=j("p");H.innerHTML=G.text||"";if(G.id){H.id=E.id}a(I,H)}a(r,I);break;default:throw"Unknown type"}return this};this.rem=function(E){var F=x(E)?t(A+E):E,G;if(!F||!F.__type){throw"Unknown control"}G=F.parentNode;G.parentNode.removeChild(G);return this};this.value=function(F,J){var H=x(F)?t(A+F):F;if(H&&H.__type){if(arguments.length===2){switch(H.__type){case"slider":H.value=H.__v.innerHTML=J;break;case"checkbox":H.checked=J;break;case"color":case"textbox":H.value=J;break;case"info":case"button":H.innerHTML=J;break;case"dropdown":if(typeof J==="number"){if(J>=0&&J<H.options.length){H.selectedIndex=J}}else{if(typeof J==="string"){for(var E=0,I=H.options,G=I.length;E<G;E++){if(I[E].innerHTML===J){H.selectedIndex=E;break}}}}break}return this}else{switch(H.__type){case"slider":return +H.value;case"checkbox":return !!H.checked;case"color":case"textbox":return H.value;case"info":case"button":return H.innerHTML;case"dropdown":return H.selectedIndex}}}};this.enable=function(E,G){var F=x(E)?t(A+E):E;if(F&&F.__type){F.disabled=!G}return this};this.show=function(E,G){if(arguments.length===1){r.style.display=E?null:"none"}else{var F=x(E)?t(A+E):E;if(F&&F.__type){F.parentNode.style.display=G?null:"none"}}return this};this.init=function(E){if(!w){(E||s.body).appendChild(r);w=!0}return this};this.bindTo=function(H){if(x(H)){H=JSON.parse(H)}var F=r.querySelectorAll("*"),E,G=0;while(E=F[G++]){if(E.__bind&&typeof H[E.__bind]!=="undefined"){this.value(E,H[E.__bind])}}};this.getBound=function(){var H={},E,G=0,F=r.querySelectorAll("*");while(E=F[G++]){if(x(E.__bind)){H[E.__bind]=this.value(E)}}return H}};